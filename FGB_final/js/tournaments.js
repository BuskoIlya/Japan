var tournaments_2018 = [
    {
        'date': 'Март 24, 25',
        'name': 'Кубок Минска',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2018/2018_03_23_minsk_cup.html',
        'icon_ok_css': 'icon_ok_active',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '10',
        'tournament_number': 'tournament-2018-03-23',
    },
    {
        'date': 'Ноя. 30, Дек. 2',
        'name': 'Чемпионат Беларуси',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2018/2018_11_30_blr_chp.html',
        'icon_ok_css': 'icon_ok_active',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '12',
        'tournament_number': 'tournament-2018-11-30',
    }
];
var tournaments_2019 = [
    {
        'date': 'Февраль 16,17',
        'name': 'Кубок Китайского Консула',
        'city': '(Санкт-Петербург, Россия)',
        'description': 'Описание...',
        'decoration_css': 'color_fill pink',
        'back_color': 'rus_color_back_css',
        'news_ref': 'html/news_archive/2019/2019_02_16_spb_chine_cup.html',
        'icon_ok_css': 'icon_ok_active',
        'place_css': 'images/places/spb.jpg',
        'address': 'Россия, г. Санкт-Петербург, Лермонтовский пр., 43/1, отель Азимут, 18 этаж.',
        'pc': '105',
        'tournament_number': 'tournament-2019-02-16',
    },
    {
        'date': 'Март 29,31',
        'name': 'Кубок Минска',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2019/2019_03_29_minsk_cup.html',
        'icon_ok_css': 'icon_ok_active',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '10',
        'tournament_number': 'tournament-2019-03-29',
    },
    {
        'date': 'Май 30 - Июнь 7',
        'name': 'Чемпионат Мира',
        'city': '(Мацуэ, Япония)',
        'description': 'Описание...',
        'decoration_css': 'color_fill blue',
        'back_color': 'world_color_back_css',
        'news_ref': 'html/news_archive/2019/2019_05_30_world_championship.html',
        'icon_ok_css': 'icon_ok_active',
        'place_css': 'images/places/tokio.jpg',
        'address': 'Япония, Префектура Симанэ, г. Мацуэ, 島根県松江市殿町.',
        'pc': '59',
        'tournament_number': 'tournament-2019-05-30',
    },
    {
        'date': 'Авг. 31 - Сен. 6',
        'name': 'Кубок Премьер Министра Кореи',
        'city': '(Сеул, Корея)',
        'description': 'Описание...',
        'decoration_css': 'color_fill blue',
        'back_color': 'world_color_back_css',
        'news_ref': 'html/news_archive/2019/2019_08_30_korea_cup.html',
        'icon_ok_css': 'icon_ok_active',
        'place_css': 'images/places/seul.jpg',
        'address': 'Южная Корея, г. Сеул, 영월스포츠파크 실내체육관.',
        'pc': '62',
        'tournament_number': 'tournament-2019-08-30',
    },
    {
        'date': 'Сентябрь 20,27',
        'name': 'Belarus Study Open',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2019/2019_09_20_study.html',
        'icon_ok_css': 'icon_ok_active',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '26',
        'tournament_number': 'tournament-2019-09-20',
    },
    {
        'date': 'Октябрь 25',
        'name': 'Осенний лист',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2019/2019_10_25_autumn.html',
        'icon_ok_css': 'icon_ok_active',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '27',
        'tournament_number': 'tournament-2019-10-25',
    },
    {
        'date': 'Ноябрь 22,23',
        'name': 'Чемпионат Беларуси',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2019/2019_11_23_blr_chp.html',
        'icon_ok_css': 'icon_ok_active',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, ул. Стариновская 37, клуб сёги Гинкаммури.',
        'pc': '17',
        'tournament_number': 'tournament-2019-11-23',
    },
    {
        'date': 'Декабрь 20,22',
        'name': '9-ый Рождественский Фестиваль',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2019/2019_12_20_christmas.html',
        'icon_ok_css': 'icon_ok_active',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '30',
        'tournament_number': 'tournament-2019-12-20',
        'ref_name': 'фгб.бел',
        'author': 'Грунковский Юрий',
    }
];

var tournaments_2020 = [
    {
        'date': 'Январь 24',
        'name': 'Открытый турнир на досках 13х13',
        'city': '(Минск, Беларусь)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/2020_01_24.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '',
        'tournament_number': 'tournament-2020-01-24',
    },
    {
        'date': 'Февраль 15-16',
        'name': 'Кубок Вейчи',
        'city': '(Минск, Беларусь)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/2020_02_15_chine.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, Китайский культурный центр, Клары Цеткин 51а',
        'pc': '',
        'tournament_number': 'tournament-2020-02-15',
    },
    {
        'date': 'Март 21-22',
        'name': 'Кубок Минска',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/03_21.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, Центр Брейнфорс, Богдановича 155, оф.502',
        'pc': '',
        'tournament_number': 'tournament-2020-03-21',
    },
    {
        'date': 'Апрель 24',
        'name': 'Весёлый ручей',
        'city': '(Минск, Беларусь)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/04_24.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '',
        'tournament_number': 'tournament-2020-04-24',
    },
    {
        'date': 'Май 15-17',
        'name': 'Кубок Дракона',
        'city': '(Минск, Беларусь)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/05_15.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '',
        'tournament_number': 'tournament-2020-05-15',
    },
    {
        'date': 'Май 22,24',
        'name': 'Юношеский чемпионат Беларуси',
        'city': '(Минск, Беларусь)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/05_22.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '',
        'tournament_number': 'tournament-2020-05-22',
    },
    {
        'date': 'Май 28 - Июнь 4',
        'name': 'Чемпионат Мира',
        'city': '(Владивосток, Россия)',
        'description': 'Описание...',
        'decoration_css': 'color_fill blue',
        'back_color': 'world_color_back_css',
        'news_ref': 'html/news_archive/2020/05_28.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/vlad.jpg',
        'address': 'Россия, Дальневосточный федеральный округ, о. Русский.',
        'pc': '',
        'tournament_number': 'tournament-2020-05-28',
    },
    {
        'date': 'Июнь 13-14',
        'name': 'Сан-рэн-сэй',
        'city': '(Минск, Беларусь)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/05_13.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, Природа.',
        'pc': '',
        'tournament_number': 'tournament-2020-06-13',
    },
    {
        'date': 'Август 28-30',
        'name': 'Олимпийский огонь',
        'city': '(Минск, Беларусь)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/08_28.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '',
        'tournament_number': 'tournament-2020-08-28',
    },
    {
        'date': 'Авг. - Сен.',
        'name': 'Кубок Премьер Министра Кореи',
        'city': '(Сеул, Корея)',
        'description': 'Описание...',
        'decoration_css': 'color_fill blue',
        'back_color': 'world_color_back_css',
        'news_ref': 'html/news_archive/2020/08.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/seul.jpg',
        'address': 'Южная Корея, г. Сеул.',
        'pc': '',
        'tournament_number': 'tournament-2020-08',
    },
    {
        'date': 'Сентябрь 25-27',
        'name': 'Belarus Study Open',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/09_25.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41; Центр Брейнфорс, Богдановича 155, оф.502.',
        'pc': '',
        'tournament_number': 'tournament-2020-09-25',
    },
    {
        'date': 'Октябрь 23',
        'name': 'Осенний лист',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/10_23.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '',
        'tournament_number': 'tournament-2020-10-23',
    },
    {
        'date': 'Ноябрь 13',
        'name': 'Семейный турнир',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/11_13.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '',
        'tournament_number': 'tournament-2020-11-13',
    },
    {
        'date': 'Ноябрь 21-22',
        'name': 'Чемпионат Беларуси',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/11_21.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск.',
        'pc': '',
        'tournament_number': 'tournament-2020-11-21',
    },
    {
        'date': 'Декабрь 18-20',
        'name': '10-ый Рождественский Фестиваль',
        'city': '(Минск)',
        'description': 'Описание...',
        'decoration_css': 'color_fill green',
        'back_color': 'blr_color_back_css',
        'news_ref': 'html/news_archive/2020/12_18.html',
        'icon_ok_css': 'icon_ok_inactive',
        'place_css': 'images/places/minsk.jpg',
        'address': 'г. Минск, МДДМ, Старовиленский тракт 41.',
        'pc': '',
        'tournament_number': 'tournament-2020-12-18',
        'ref_name': 'фгб.бел',
        'author': 'Грунковский Юрий',
    }
];

function load_tournaments_data() {
    let tournaments = [];
    tournaments.push(tournaments_2020);
    tournaments.push(tournaments_2019);
    tournaments.push(tournaments_2018);
    let ul_item = $('ul.tabs_data');
    for (let i = 0; i < tournaments.length; i++) {
        let li = $('<li/>');
        if (i == 0) {
            li.addClass('active');
        }
        let div = $('<div/>');
        let id = 'tournament-' + i;
        div.attr('id', id);
        for (let j = 0; j < tournaments[i].length; j++) {
            $('#tournament_template').tmpl(tournaments[i][j]).appendTo(div);
        }
        div.appendTo(li);
        li.appendTo(ul_item);
    }
}

function show_tabs_data() {
    let timelineBlocks = $('.chain_block'),
        offset = 0.8;

    hideBlocks(timelineBlocks, offset);

    $(window).on('scroll', function () {
        (!window.requestAnimationFrame)
            ? setTimeout(function () {
                showBlocks(timelineBlocks, offset);
            }, 500)
            : window.requestAnimationFrame(function () {
                showBlocks(timelineBlocks, offset);
            });
    });

    function hideBlocks(blocks, offset) {
        blocks.each(function () {
            ($(this).offset().top > $(window).scrollTop() + $(window).height() * offset) && $(this).find('.chain_icon, .chain_data').addClass('is-hidden');
        });
    }

    function showBlocks(blocks, offset) {
        blocks.each(function () {
            ($(this).offset().top <= $(window).scrollTop() + $(window).height() * offset && $(this).find('.chain_icon').hasClass('is-hidden')) && $(this).find('.chain_icon, .chain_data').removeClass('is-hidden').addClass('bounce-in');
        });
    }

    let listItemHeight = $(".tabs_panel ul")
        .find("li:eq(" + 0 + ")")
        .innerHeight();
    $(".tabs_panel ul").height(listItemHeight + "px");
}
