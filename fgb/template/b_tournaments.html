<script>


    var tournaments2 = tournaments.slice();
    delete tournaments2[0];
    $(document).ready(function () {
        for (var i = 0; i < tournaments.length; i++) {
            $('#t_tournaments').tmpl(tournaments[i]).appendTo('#cd-timeline');
        }

        for (var i = 0; i < tournaments2.length; i++) {
            $('#t_tournaments').tmpl(tournaments2[i]).appendTo('#cd-timeline2');
        }
    });
</script>

<script type='text/x-jquery-tmpl' id='t_tournaments'>
    <div class="cd-timeline-block">
      <div class="cd-timeline-img ${back_color}">
        <img src="./images/cd-icon-picture.svg" alt="Picture">
      </div> <!-- cd-timeline-img -->

      <div class="cd-timeline-content">
        <h2>${name}</h2>
        <p>${description}</p>
        <!--a href="#" class="btn_ahref {}" data-text="Читать далее...">Читать далее...</a-->
        <span class="cd-date">${date}</span>
      </div> <!-- cd-timeline-content -->
    </div> <!-- cd-timeline-block -->


</script>

<div id="t_tounaments_page_id" style="margin-bottom: 20px">
  <div id="tounaments_panel_id">
    <h1>Турниры</h1>

    <div class="tabs_panel">
      <div class="tabs_panel">
        <div class="tabs_panel_col gc--1-of-3">
          <div class="tabs_menu">
            <div class="active"><span class="light"></span><span>2019</span></div>
            <div><span class="light"></span><span>2018</span></div>
          </div>
        </div>
        <div class="tabs_panel_col gc--2-of-3">
          <ul class="tabs_data" id="tournament_tab_id">
            <li class="active">
              <section id="cd-timeline" class="cd-container">
              </section> <!-- cd-timeline -->
            </li>
            <li>
              <section id="cd-timeline2" class="cd-container">
              </section>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
    jQuery(document).ready(function ($) {
        var timelineBlocks = $('.chain_block'),
            offset = 0.8;

        //hide timeline blocks which are outside the viewport
        hideBlocks(timelineBlocks, offset);

        //on scolling, show/animate timeline blocks when enter the viewport
        $(window).on('scroll', function () {
            (!window.requestAnimationFrame)
                ? setTimeout(function () {
                    showBlocks(timelineBlocks, offset);
                }, 100)
                : window.requestAnimationFrame(function () {
                    showBlocks(timelineBlocks, offset);
                });
        });

        function hideBlocks(blocks, offset) {
            blocks.each(function () {
                ($(this).offset().top > $(window).scrollTop() + $(window).height() * offset) && $(this).find('.chain_icon, .chain_data').addClass('is-hidden');
            });
        }

        function showBlocks(blocks, offset) {
            blocks.each(function () {
                ($(this).offset().top <= $(window).scrollTop() + $(window).height() * offset && $(this).find('.chain_icon').hasClass('is-hidden')) && $(this).find('.chain_icon, .chain_data').removeClass('is-hidden').addClass('bounce-in');
            });
        }

        if (!$(this).is("active")) {
            $(".tabs_panel .tabs_menu div").removeClass("active");
            $(".tabs_panel ul li").removeClass("active");

            $(this).addClass("active");
            $(".tabs_panel ul").find("li:eq(" + 0 + ")").addClass("active");

            var listItemHeight = $(".tabs_panel ul")
                .find("li:eq(" + 0 + ")")
                .innerHeight();
            $(".tabs_panel ul").height(listItemHeight + "px");
        }
    });
</script>
